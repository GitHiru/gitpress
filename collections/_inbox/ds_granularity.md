---
date    : 2021-11-16
title   : 【📊 DS】リュード（粒度:りゅうど）
excerpt :
tags    : ["DataScientist"]
---
## || 粒度
> 粒状性、つまり顆粒または粒子に存在する状態は、材料またはシステムが識別可能な部分で構成されている程度を指します。それは、より大きなエンティティが細分化される程度、またはより小さな区別できないエンティティのグループが一緒になってより大きな識別可能なエンティティになる程度のいずれかを指すことができます。
>
> ー [Granularity](https://en.wikipedia.org/wiki/Granularity) - Wikipedia(英語)

## || プログラマー界隈
> 粒度（りゅうど、granularity）は、プログラム（ソースコード）について、プログラマーの頭の中で問題となる箇所や用途と関連のある箇所をピックアップしやすい状態に保守し続けることを意図する文脈の用語である。
>
> ー [粒度 (プログラミング)](https://ja.wikipedia.org/wiki/%E7%B2%92%E5%BA%A6_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0)) - Wikipedia

> 粒度とは、粉状や粒状、塊状の物体の粒子の大きさのこと。IT分野では、データやプログラム、作業工程などの構成単位の粗さ、大きさのことを比喩的にこのように呼ぶ。
>
> ー [粒度（granularity）とは](https://e-words.jp/w/%E7%B2%92%E5%BA%A6.html) - IT用語辞典 e-Words

## || データサイエンス界隈

> データの粒度とは、テーブルや表などのデータセットにおいて、データの細かさを表す指標です。
>例えば、『会員マスタは、会員IDひとつにつき、データが1件格納されている」、「売上テーブルは、店舗IDと決済キーの組み合わせひとつにつき、データが1件格納されている」といったように、どの項目でデータを一意に特定できるかを表す指標です。
>これはデータベースにおけるプライマリキー（PK）に相当します。
> ですので、「このテーブルの粒度は？」と聞かれた場合は、テーブルのプライマリキーを答えてあげましょう。
> ただし、プライマリキーが定義されていないテーブルも多々あるでしょう。そのような場合は、そのテーブルがどのような使われ方をされているかを調査する必要があります。具体的には、どのようなユースケースの際にレコードが挿入されるのかをプログラムなどで確認したり、テーブルについて詳しい方にヒアリングする作業が必要になります。

Cf. [データの粒度とは？ ～データの細かさを示す指標～｜データ分析用語を解説](https://www.gixo.jp/blog/12509/) - GiXo



ID-POS
```
🏡 (渋谷店)
 └ 👤 (♀/20~30代)
     └ 🧾レシート (2021/11/16 11:30:11)
        ┝ 📦商品a (¥100)
        ┝ 📦商品b (¥200)
        ┝ 📦商品c (¥100)
        └ 📦商品c (¥100)
```
```
| |yy-mm-dd|customer|shop_id|receipt|product|amount|
|1|21-11-11|      21|     38|    112|    108|   100|
|2|21-11-11|      21|     38|    112|    109|   200|
|2|21-11-11|      21|     38|    112|    110|   100|
|2|21-11-11|      21|     38|    112|    110|   100|
```
例えば、ID-POSの集計の最小単位（＝粒度）は、購買データ。
扱うデータがどのように、各テーブルに落とし込まれているのか？
目視で確認できるレベルのモノであれば違和感に気付きやすいが、
例えば8億レコード強の購買データであれば、どうだろうか？
論理的に組み立てた数字を説明できるだろうか？
取り扱うデータの粒度を確認して、集計の際にはキチンと念頭に入れて取り組むことが大事である。（当方、この点の欠如で大失敗を経験w）
